<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1252px" preserveAspectRatio="none" style="width:952px;height:1252px;" version="1.1" viewBox="0 0 952 1252" width="952px" zoomAndPan="magnify"><defs><filter height="300%" id="fapvhu4seo3ij" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fapvhu4seo3ij)" height="58.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="259" y="229.9609"/><rect fill="#FFFFFF" filter="url(#fapvhu4seo3ij)" height="58.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="259" y="547.2891"/><rect fill="#FFFFFF" filter="url(#fapvhu4seo3ij)" height="58.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="259" y="1030.6797"/><rect fill="#FFFFFF" filter="url(#fapvhu4seo3ij)" height="88.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="486.5" y="259.0938"/><rect fill="#FFFFFF" filter="url(#fapvhu4seo3ij)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="486.5" y="434.7578"/><rect fill="#FFFFFF" filter="url(#fapvhu4seo3ij)" height="169.7969" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="486.5" y="576.4219"/><rect fill="#FFFFFF" filter="url(#fapvhu4seo3ij)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="486.5" y="903.0156"/><rect fill="#FFFFFF" filter="url(#fapvhu4seo3ij)" height="87.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="486.5" y="1059.8125"/><rect fill="#FFFFFF" filter="url(#fapvhu4seo3ij)" height="800.7188" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="727" y="317.3594"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="104" x2="104" y1="86.2969" y2="1165.2109"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="264" x2="264" y1="86.2969" y2="1165.2109"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="491.5" x2="491.5" y1="86.2969" y2="1165.2109"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="731.5" x2="731.5" y1="86.2969" y2="1165.2109"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="877.5" x2="877.5" y1="86.2969" y2="1165.2109"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="70" x="66" y="82.9951">Client app</text><ellipse cx="104" cy="13" fill="#FEFECE" filter="url(#fapvhu4seo3ij)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M104,21 L104,48 M91,29 L117,29 M104,48 L91,63 M104,48 L117,63 " fill="none" filter="url(#fapvhu4seo3ij)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="70" x="66" y="1177.2061">Client app</text><ellipse cx="104" cy="1190.5078" fill="#FEFECE" filter="url(#fapvhu4seo3ij)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M104,1198.5078 L104,1225.5078 M91,1206.5078 L117,1206.5078 M104,1225.5078 L91,1240.5078 M104,1225.5078 L117,1240.5078 " fill="none" filter="url(#fapvhu4seo3ij)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#fapvhu4seo3ij)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="106" x="209" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="92" x="216" y="70.9951">Client Thread</text><rect fill="#FEFECE" filter="url(#fapvhu4seo3ij)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="106" x="209" y="1164.2109"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="92" x="216" y="1184.2061">Client Thread</text><rect fill="#FEFECE" filter="url(#fapvhu4seo3ij)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="136" x="421.5" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="122" x="428.5" y="70.9951">Command Thread</text><rect fill="#FEFECE" filter="url(#fapvhu4seo3ij)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="136" x="421.5" y="1164.2109"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="122" x="428.5" y="1184.2061">Command Thread</text><rect fill="#FEFECE" filter="url(#fapvhu4seo3ij)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="95" x="682.5" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="81" x="689.5" y="70.9951">Pool Thread</text><rect fill="#FEFECE" filter="url(#fapvhu4seo3ij)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="95" x="682.5" y="1164.2109"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="81" x="689.5" y="1184.2061">Pool Thread</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="109" x="820.5" y="82.9951">Pool with nodes</text><ellipse cx="878" cy="13" fill="#0000FF" filter="url(#fapvhu4seo3ij)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M878,21 L878,48 M865,29 L891,29 M878,48 L865,63 M878,48 L891,63 " fill="none" filter="url(#fapvhu4seo3ij)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="109" x="820.5" y="1177.2061">Pool with nodes</text><ellipse cx="878" cy="1190.5078" fill="#0000FF" filter="url(#fapvhu4seo3ij)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M878,1198.5078 L878,1225.5078 M865,1206.5078 L891,1206.5078 M878,1225.5078 L865,1240.5078 M878,1225.5078 L891,1240.5078 " fill="none" filter="url(#fapvhu4seo3ij)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FFFFFF" filter="url(#fapvhu4seo3ij)" height="58.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="259" y="229.9609"/><rect fill="#FFFFFF" filter="url(#fapvhu4seo3ij)" height="58.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="259" y="547.2891"/><rect fill="#FFFFFF" filter="url(#fapvhu4seo3ij)" height="58.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="259" y="1030.6797"/><rect fill="#FFFFFF" filter="url(#fapvhu4seo3ij)" height="88.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="486.5" y="259.0938"/><rect fill="#FFFFFF" filter="url(#fapvhu4seo3ij)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="486.5" y="434.7578"/><rect fill="#FFFFFF" filter="url(#fapvhu4seo3ij)" height="169.7969" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="486.5" y="576.4219"/><rect fill="#FFFFFF" filter="url(#fapvhu4seo3ij)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="486.5" y="903.0156"/><rect fill="#FFFFFF" filter="url(#fapvhu4seo3ij)" height="87.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="486.5" y="1059.8125"/><rect fill="#FFFFFF" filter="url(#fapvhu4seo3ij)" height="800.7188" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="727" y="317.3594"/><path d="M161,101.2969 L161,156.2969 L362,156.2969 L362,111.2969 L352,101.2969 L161,101.2969 " fill="#FBFB77" filter="url(#fapvhu4seo3ij)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M352,101.2969 L352,111.2969 L362,111.2969 L352,101.2969 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="159" x="167" y="118.3638">Thread of an application,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180" x="167" y="133.4966">used to transfer commands</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="167" y="148.6294">to Command thread.</text><path d="M376,101.2969 L376,156.2969 L602,156.2969 L602,111.2969 L592,101.2969 L376,101.2969 " fill="#FBFB77" filter="url(#fapvhu4seo3ij)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M592,101.2969 L592,111.2969 L602,111.2969 L592,101.2969 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="166" x="382" y="118.3638">Main thread of the library.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="205" x="382" y="133.4966">It executes biggest part of logic</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="196" x="382" y="148.6294">that is implemented in Libindy</text><path d="M616,101.2969 L616,141.2969 L843,141.2969 L843,111.2969 L833,101.2969 L616,101.2969 " fill="#FBFB77" filter="url(#fapvhu4seo3ij)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M833,101.2969 L833,111.2969 L843,111.2969 L833,101.2969 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="206" x="622" y="118.3638">Thread used for communication</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="622" y="133.4966">with nodes in pool</text><rect fill="#EEEEEE" filter="url(#fapvhu4seo3ij)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="937.5" x="3" y="186.2617"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="940.5" y1="186.2617" y2="186.2617"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="940.5" y1="189.2617" y2="189.2617"/><rect fill="#EEEEEE" filter="url(#fapvhu4seo3ij)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="255" x="344.25" y="175.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="241" x="350.25" y="191.7622">Pool communication commands</text><polygon fill="#A80036" points="247,225.9609,257,229.9609,247,233.9609,251,229.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="104" x2="253" y1="229.9609" y2="229.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="101" x="111" y="224.895">indy_open_pool</text><polygon fill="#A80036" points="474.5,255.0938,484.5,259.0938,474.5,263.0938,478.5,259.0938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="269" x2="480.5" y1="259.0938" y2="259.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="36" x="276" y="254.0278">Open</text><polygon fill="#A80036" points="115,284.2266,105,288.2266,115,292.2266,111,288.2266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="109" x2="263" y1="288.2266" y2="288.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="121" y="283.1606">error code</text><polygon fill="#A80036" points="715,313.3594,725,317.3594,715,321.3594,719,317.3594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="496.5" x2="721" y1="317.3594" y2="317.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="503.5" y="312.2935">Pool::new</text><polygon fill="#A80036" points="866,372.4922,876,376.4922,866,380.4922,870,376.4922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="737" x2="872" y1="376.4922" y2="376.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="87" x="744" y="371.4263">sync network</text><polygon fill="#A80036" points="748,401.625,738,405.625,748,409.625,744,405.625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="742" x2="877" y1="405.625" y2="405.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="754" y="400.5591">fresh network info</text><polygon fill="#A80036" points="507.5,430.7578,497.5,434.7578,507.5,438.7578,503.5,434.7578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="501.5" x2="726" y1="434.7578" y2="434.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="59" x="513.5" y="429.6919">OpenAck</text><polygon fill="#A80036" points="115,459.8906,105,463.8906,115,467.8906,111,463.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="109" x2="490.5" y1="463.8906" y2="463.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="121" y="458.8247">pool_handle</text><path d="M8,476.8906 L8,516.8906 L196,516.8906 L196,486.8906 L186,476.8906 L8,476.8906 " fill="#FBFB77" filter="url(#fapvhu4seo3ij)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M186,476.8906 L186,486.8906 L196,486.8906 L186,476.8906 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="157" x="14" y="493.9575">From now on pool works</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="167" x="14" y="509.0903">and requests can be sent</text><polygon fill="#A80036" points="247,543.2891,257,547.2891,247,551.2891,251,547.2891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="104" x2="253" y1="547.2891" y2="547.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="111" y="542.2231">indy_submit_request</text><polygon fill="#A80036" points="474.5,572.4219,484.5,576.4219,474.5,580.4219,478.5,576.4219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="269" x2="480.5" y1="576.4219" y2="576.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="101" x="276" y="571.356">SubmitRequest</text><polygon fill="#A80036" points="115,601.5547,105,605.5547,115,609.5547,111,605.5547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="109" x2="263" y1="605.5547" y2="605.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="121" y="600.4888">error code</text><path d="M15,618.5547 L15,673.5547 L188,673.5547 L188,628.5547 L178,618.5547 L15,618.5547 " fill="#FBFB77" filter="url(#fapvhu4seo3ij)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M178,618.5547 L178,628.5547 L188,628.5547 L178,618.5547 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="125" x="21" y="635.6216">App waits for result</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="21" y="650.7544">asynchronously if there</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="21" y="665.8872">was no error before</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="496.5" x2="538.5" y1="704.0859" y2="704.0859"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="538.5" x2="538.5" y1="704.0859" y2="717.0859"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="497.5" x2="538.5" y1="717.0859" y2="717.0859"/><polygon fill="#A80036" points="507.5,713.0859,497.5,717.0859,507.5,721.0859,503.5,717.0859" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="503.5" y="699.02">send_tx</text><polygon fill="#A80036" points="715,742.2188,725,746.2188,715,750.2188,719,746.2188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="491.5" x2="721" y1="746.2188" y2="746.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="498.5" y="741.1528">_send_message</text><path d="M379,759.2188 L379,814.2188 L600,814.2188 L600,769.2188 L590,759.2188 L379,759.2188 " fill="#FBFB77" filter="url(#fapvhu4seo3ij)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M590,759.2188 L590,769.2188 L600,769.2188 L590,759.2188 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="385" y="776.2856">Command thread can execute</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="155" x="385" y="791.4185">other commands during</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="151" x="385" y="806.5513">the work of pool thread</text><polygon fill="#A80036" points="866,840.75,876,844.75,866,848.75,870,844.75" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="737" x2="872" y1="844.75" y2="844.75"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="744" y="839.6841">send(json)</text><polygon fill="#A80036" points="748,869.8828,738,873.8828,748,877.8828,744,873.8828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="742" x2="877" y1="873.8828" y2="873.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="754" y="868.8169">responses</text><polygon fill="#A80036" points="507.5,899.0156,497.5,903.0156,507.5,907.0156,503.5,903.0156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="501.5" x2="726" y1="903.0156" y2="903.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="141" x="513.5" y="897.9497">aggregated response</text><polygon fill="#A80036" points="115,928.1484,105,932.1484,115,936.1484,111,932.1484" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="109" x2="490.5" y1="932.1484" y2="932.1484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="37" x="121" y="927.0825">result</text><path d="M9,945.1484 L9,1000.1484 L195,1000.1484 L195,955.1484 L185,945.1484 L9,945.1484 " fill="#FBFB77" filter="url(#fapvhu4seo3ij)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M185,945.1484 L185,955.1484 L195,955.1484 L185,945.1484 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="151" x="15" y="962.2153">When the work is over,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="165" x="15" y="977.3481">you should close the pool</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="153" x="15" y="992.481">and it will kill the thread</text><polygon fill="#A80036" points="247,1026.6797,257,1030.6797,247,1034.6797,251,1030.6797" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="104" x2="253" y1="1030.6797" y2="1030.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="102" x="111" y="1025.6138">indy_close_pool</text><polygon fill="#A80036" points="474.5,1055.8125,484.5,1059.8125,474.5,1063.8125,478.5,1059.8125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="269" x2="480.5" y1="1059.8125" y2="1059.8125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="36" x="276" y="1054.7466">Close</text><polygon fill="#A80036" points="115,1084.9453,105,1088.9453,115,1092.9453,111,1088.9453" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="109" x2="263" y1="1088.9453" y2="1088.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="121" y="1083.8794">error code</text><polygon fill="#A80036" points="720,1114.0781,730,1118.0781,720,1122.0781,724,1118.0781" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="496.5" x2="726" y1="1118.0781" y2="1118.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="71" x="503.5" y="1113.0122">Pool::close</text><polygon fill="#A80036" points="115,1143.2109,105,1147.2109,115,1151.2109,111,1147.2109" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="109" x2="490.5" y1="1147.2109" y2="1147.2109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="121" y="1142.145">error code</text><!--
@startuml
actor "Client app" as App
participant "Client Thread" as Client
note over Client
    Thread of an application,
    used to transfer commands
    to Command thread.
end note
participant "Command Thread" as Command
/ note over Command
    Main thread of the library.
    It executes biggest part of logic
    that is implemented in Libindy
end note
participant "Pool Thread" as Pool
/ note over Pool
    Thread used for communication
    with nodes in pool
end note
actor "Pool with nodes" as Nodes #blue
==Pool communication commands==
App -> Client: indy_open_pool
activate Client
Client -> Command: Open
activate Command
Client - -> App: error code
deactivate Client
Command -> Pool: Pool::new
activate Pool
deactivate Command
Pool -> Nodes: sync network
Nodes - -> Pool: fresh network info
Pool -> Command: OpenAck
activate Command
Command - -> App: pool_handle
deactivate Command

note over App
    From now on pool works
    and requests can be sent
end note

App -> Client: indy_submit_request
activate Client
Client -> Command: SubmitRequest
activate Command
Client - -> App: error code
deactivate Client

note over App
    App waits for result
    asynchronously if there
    was no error before
end note
Command -> Command: send_tx
Command -> Pool: _send_message
note over Command
    Command thread can execute
    other commands during
    the work of pool thread
end note
deactivate Command
Pool -> Nodes: send(json)
Nodes -> Pool: responses
Pool - -> Command: aggregated response
activate Command
Command - -> App: result
deactivate Command

note over App
    When the work is over,
    you should close the pool
    and it will kill the thread
end note

App -> Client: indy_close_pool
activate Client
Client -> Command: Close
activate Command
Client -> App: error code
deactivate Client
Command -> Pool: Pool::close
deactivate Pool
Command - -> App: error code
deactivate Command
@enduml

PlantUML version 1.2019.08(Sat Jul 13 22:25:14 MSK 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_152-release-1343-b26
Operating System: Linux
OS Version: 5.0.4-arch1-1-ARCH
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>