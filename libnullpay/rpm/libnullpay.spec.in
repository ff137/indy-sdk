%global __os_install_post %{nil}
%define _rpmdir @dir@/rpms

Summary: Null Payment Plugin for Indy SDK
Name: libnullpay
Version: @version@
Release: 1%{?dist}
License: Apache License 2.0
Group: System Environment/Libraries
Source: https://github.com/hyperledger/indy-sdk/
URL: https://github.com/hyperledger/indy-sdk/
BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root-%(%{__id_u} -n)
Requires: libindy
BuildRequires: libindy

%description
This is a simple plugin that can be used for development of applications that use Payments API of Indy SDK.

%prep
%build

%install
rm -rf ${RPM_BUILD_ROOT}

install -dm0755 $RPM_BUILD_ROOT/%{_libdir}
install -Dm0644 @dir@/target/release/libnullpay.so $RPM_BUILD_ROOT/%{_libdir}/libnullpay.so

%clean
rm -rf ${RPM_BUILD_ROOT}

%post -p /sbin/ldconfig

%postun -p /sbin/ldconfig

%files
%defattr(-,root,root)
%{_libdir}/libnullpay.so*

%changelog
